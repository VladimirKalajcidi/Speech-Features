schema: '2.0'
stages:
  data_ingestion:
    cmd: python src/speechRecognition/pipeline/stage_01_data_ingestion.py
    deps:
    - path: config/config.yaml
      hash: md5
      md5: 7a8b2238c6f3e6bad004f2be0ba3f054
      size: 474
    - path: src/speechRecognition/pipeline/stage_01_data_ingestion.py
      hash: md5
      md5: ccae3c8f6530e7ec02b8909d2bd255ac
      size: 858
    outs:
    - path: artifacts/data_ingestion/data.hf
      hash: md5
      md5: 5a384c93c7dee590923ffb0b239bdc3a.dir
      size: 1575323900
      nfiles: 7
  prepare_base_model:
    cmd: python src/speechRecognition/pipeline/stage_02_prepare_base_model.py
    deps:
    - path: config/config.yaml
      hash: md5
      md5: 7a8b2238c6f3e6bad004f2be0ba3f054
      size: 474
    - path: src/speechRecognition/pipeline/stage_02_prepare_base_model.py
      hash: md5
      md5: 8098990a8a8a88920faed810523b4ea0
      size: 930
    params:
      params.yaml:
        SIZE: openai/whisper-tiny
    outs:
    - path: artifacts/prepare_base_model
      hash: md5
      md5: b5c4d2650d347bd0542afb4f6e770a2c.dir
      size: 302135370
      nfiles: 6
  training:
    cmd: python src/speechRecognition/pipeline/stage_03_model_trainer.py
    deps:
    - path: artifacts/data_ingestion/data.hf
      hash: md5
      md5: 5a384c93c7dee590923ffb0b239bdc3a.dir
      size: 1575323900
      nfiles: 7
    - path: artifacts/prepare_base_model
      hash: md5
      md5: b5c4d2650d347bd0542afb4f6e770a2c.dir
      size: 302135370
      nfiles: 6
    - path: config/config.yaml
      hash: md5
      md5: 7a8b2238c6f3e6bad004f2be0ba3f054
      size: 474
    - path: src/speechRecognition/pipeline/stage_03_model_trainer.py
      hash: md5
      md5: ab22a7a640cd31f3d6d3b2a955ac3b18
      size: 936
    params:
      params.yaml:
        DATA_SIZE: 2
        GENERATION_MAX_LENGTH: 225
        LANGUAGE: Russian
        LEARNING_RATE: 0,00001
        MAX_STEPS: 1
        METRIC: wer
        PUSH_TO_HUB: false
        SIZE: openai/whisper-tiny
        TASK: transcribe
    outs:
    - path: artifacts/training/model
      hash: md5
      md5: a616cb22afeb83dd2aa555e0aa0f5ce3.dir
      size: 151074406
      nfiles: 4
