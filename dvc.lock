schema: '2.0'
stages:
  data_ingestion:
    cmd: python src/speechRecognition/pipeline/stage_01_data_ingestion.py
    deps:
    - path: config/config.yaml
      hash: md5
      md5: 7a8b2238c6f3e6bad004f2be0ba3f054
      size: 474
    - path: src/speechRecognition/pipeline/stage_01_data_ingestion.py
      hash: md5
      md5: ccae3c8f6530e7ec02b8909d2bd255ac
      size: 858
    outs:
    - path: artifacts/data_ingestion/data.hf
      hash: md5
      md5: 5a384c93c7dee590923ffb0b239bdc3a.dir
      size: 1575323900
      nfiles: 7
  prepare_base_model:
    cmd: python src/speechRecognition/pipeline/stage_02_prepare_base_model.py
    deps:
    - path: config/config.yaml
      hash: md5
      md5: 7a8b2238c6f3e6bad004f2be0ba3f054
      size: 474
    - path: src/speechRecognition/pipeline/stage_02_prepare_base_model.py
      hash: md5
      md5: 8098990a8a8a88920faed810523b4ea0
      size: 930
    params:
      params.yaml:
        SIZE: openai/whisper-base
    outs:
    - path: artifacts/prepare_base_model
      hash: md5
      md5: 9a6656e3512e8305b3b3b4de2a40f2dc.dir
      size: 580820018
      nfiles: 6
  training:
    cmd: python src/speechRecognition/pipeline/stage_03_model_trainer.py
    deps:
    - path: artifacts/data_ingestion/data.hf
      hash: md5
      md5: 5a384c93c7dee590923ffb0b239bdc3a.dir
      size: 1575323900
      nfiles: 7
    - path: artifacts/prepare_base_model
      hash: md5
      md5: 9a6656e3512e8305b3b3b4de2a40f2dc.dir
      size: 580820018
      nfiles: 6
    - path: config/config.yaml
      hash: md5
      md5: 7a8b2238c6f3e6bad004f2be0ba3f054
      size: 474
    - path: src/speechRecognition/pipeline/stage_03_model_trainer.py
      hash: md5
      md5: ab22a7a640cd31f3d6d3b2a955ac3b18
      size: 936
    params:
      params.yaml:
        DATA_SIZE: 10
        GENERATION_MAX_LENGTH: 225
        LANGUAGE: Russian
        LEARNING_RATE: 0,00001
        MAX_STEPS: 2
        METRIC: wer
        PUSH_TO_HUB: false
        SIZE: openai/whisper-base
        TASK: transcribe
    outs:
    - path: artifacts/training/model
      hash: md5
      md5: 3cf0271860964228a077d192b54f798c.dir
      size: 1155646140
      nfiles: 12
